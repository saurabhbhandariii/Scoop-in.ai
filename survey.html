<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Scoop-in.ai Survey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css" />
    <style>
      .field.question {
        counter-increment: question-counter;
        margin-bottom: 1.5rem;
      }
      .field.question .label::before {
        content: counter(question-counter) ". ";
        font-weight: bold;
        margin-right: 0.5rem;
      }
      .field.is-checkbox-group .control {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
      }
      .field.is-checkbox-group .control .b-checkbox {
        display: flex;
        align-items: center;
      }
    </style>
  </head>

  <body>
    <section class="section">
      <div class="container">
        <h1 class="title has-text-centered">Community Survey</h1>
        <p class="subtitle has-text-centered">
          Your insights help us understand how people engage with short videos and misinformation online.
        </p>

        <form method="post" id="form" class="box" action="https://sheetdb.io/api/v1/24lsa44exos6r">
          <!-- Replace YOUR_API_KEY_HERE with your actual SheetDB API key -->

          <div class="field question is-checkbox-group">
            <label class="label">Which platforms do you watch short form videos on?</label>
            <div class="control">
              <label class="b-checkbox checkbox"><input type="checkbox" name="platforms[]" value="TikTok" /> TikTok</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="platforms[]" value="YouTube Shorts" /> YouTube Shorts</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="platforms[]" value="Instagram Reels" /> Instagram Reels</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="platforms[]" value="Facebook" /> Facebook</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="platforms[]" value="Snapchat" /> Snapchat</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="platforms[]" value="Other" /> Other</label>
            </div>
          </div>

          <div class="field question">
            <label class="label">On average, how much time do you spend watching short form videos daily?</label>
            <div class="control">
              <label class="radio"><input type="radio" name="daily_time" value="< 30 mins" /> &lt; 30 mins</label>
              <label class="radio"><input type="radio" name="daily_time" value="30–60 mins" /> 30–60 mins</label>
              <label class="radio"><input type="radio" name="daily_time" value="1–2 hrs" /> 1–2 hrs</label>
              <label class="radio"><input type="radio" name="daily_time" value="2–3 hrs" /> 2–3 hrs</label>
              <label class="radio"><input type="radio" name="daily_time" value="3+ hrs" /> 3+ hrs</label>
            </div>
          </div>

          <div class="field question is-checkbox-group">
            <label class="label">Why do you watch short form videos?</label>
            <div class="control">
              <label class="b-checkbox checkbox"><input type="checkbox" name="reasons[]" value="Entertainment" /> Entertainment</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="reasons[]" value="News" /> News</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="reasons[]" value="Education" /> Education</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="reasons[]" value="Trends" /> Trends</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="reasons[]" value="Product reviews" /> Product reviews</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="reasons[]" value="Other" /> Other</label>
            </div>
          </div>

          <div class="field question">
            <label class="label">Have you ever seen information in a short video that turned out to be false?</label>
            <div class="control">
              <label class="radio"><input type="radio" name="seen_false_info" value="Yes" /> Yes</label>
              <label class="radio"><input type="radio" name="seen_false_info" value="No" /> No</label>
              <label class="radio"><input type="radio" name="seen_false_info" value="Not sure" /> Not sure</label>
            </div>
          </div>

          <div class="field question">
            <label class="label">Have you ever believed something from a video that was later proven wrong?</label>
            <div class="control">
              <label class="radio"><input type="radio" name="believed_wrong_info" value="Yes" /> Yes</label>
              <label class="radio"><input type="radio" name="believed_wrong_info" value="No" /> No</label>
            </div>
          </div>

          <div class="field question is-checkbox-group">
            <label class="label">Which categories of content do you most often see misinformation in?</label>
            <div class="control">
              <label class="b-checkbox checkbox"><input type="checkbox" name="misinfo_cat[]" value="Health" /> Health</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="misinfo_cat[]" value="Finance" /> Finance</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="misinfo_cat[]" value="Politics" /> Politics</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="misinfo_cat[]" value="Celebrity news" /> Celebrity news</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="misinfo_cat[]" value="Social issues" /> Social issues</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="misinfo_cat[]" value="Tech" /> Tech</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="misinfo_cat[]" value="Other" /> Other</label>
            </div>
          </div>

          <div class="field question">
            <label class="label">How much do you trust the average short form video? (1–10)</label>
            <div class="control">
              <input class="input" type="number" name="trust_level" min="1" max="10" placeholder="1 = No trust, 10 = Complete trust" />
            </div>
          </div>

          <div class="field question">
            <label class="label">If a tool existed that showed you whether a short video was true or misleading, would you use it?</label>
            <div class="control">
              <label class="radio"><input type="radio" name="use_tool" value="Yes, definitely" /> Yes, definitely</label>
              <label class="radio"><input type="radio" name="use_tool" value="Maybe" /> Maybe</label>
              <label class="radio"><input type="radio" name="use_tool" value="No" /> No</label>
            </div>
          </div>

          <div class="field question is-checkbox-group">
            <label class="label">How would you prefer this tool to work?</label>
            <div class="control">
              <label class="b-checkbox checkbox"><input type="checkbox" name="tool_format[]" value="Browser extension" /> Browser extension</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="tool_format[]" value="Mobile app" /> Mobile app</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="tool_format[]" value="Built into the platform" /> Built into the platform</label>
              <label class="b-checkbox checkbox"><input type="checkbox" name="tool_format[]" value="Don’t know yet" /> Don’t know yet</label>
            </div>
          </div>

          <div class="field question">
            <label class="label">What would make you trust a tool like this?</label>
            <div class="control">
              <textarea class="textarea" name="trust_reason" placeholder="Your honest thoughts..."></textarea>
            </div>
          </div>

          <div class="field question">
            <label class="label">Would you be interested in early access to this tool when it launches?</label>
            <div class="control">
              <label class="radio"><input type="radio" name="early_access" value="Yes" /> Yes</label>
              <label class="radio"><input type="radio" name="early_access" value="No" /> No</label>
            </div>
          </div>

          <div class="field question">
            <label class="label">Leave your email (optional)</label>
            <div class="control">
              <input class="input" type="email" name="email" placeholder="you@example.com" />
            </div>
          </div>

          <div class="field question">
            <label class="label">What country do you currently live in?</label>
            <div class="control">
              <input class="input" type="text" name="country" placeholder="Your country" />
            </div>
          </div>

          <div class="field question">
            <label class="label">What age range are you in?</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="age_range">
                  <option value="">-- Select Age Range --</option>
                  <option value="Under 18">&lt;18</option>
                  <option value="18-24">18–24</option>
                  <option value="25-34">25–34</option>
                  <option value="35-44">35–44</option>
                  <option value="45-54">45–54</option>
                  <option value="55+">55+</option>
                </select>
              </div>
            </div>
          </div>

          <div class="field question">
            <label class="label">What language content have you found the most misinformative?</label>
            <div class="control">
              <label class="radio"><input type="radio" name="language_bias" value="English" /> English</label>
              <label class="radio"><input type="radio" name="language_bias" value="Regional Language" /> Regional Language</label>
            </div>
          </div>

          <div class="field is-grouped">
            <div class="control">
              <button type="submit" class="button is-link" id="submit-button">Submit</button>
            </div>
            <div class="control">
              <button type="button" class="button is-light">Cancel</button>
            </div>
          </div>

          <div id="message" style="display: none; padding: 10px; border-radius: 4px; margin-top: 1rem;"></div>
        </form>
      </div>
    </section>

    <script>
      const form = document.getElementById("form");
      const submitButton = document.getElementById("submit-button");
      const messageDiv = document.getElementById("message");

      form.addEventListener("submit", async function (e) {
        e.preventDefault();
        messageDiv.textContent = "Submitting...";
        messageDiv.style.display = "block";
        messageDiv.style.backgroundColor = "beige";
        messageDiv.style.color = "black";
        submitButton.disabled = true;
        submitButton.classList.add("is-loading");

        try {
          const formData = new FormData(this);
          const formDataObj = {};

          for (let [key, value] of formData.entries()) {
            if (key.endsWith("[]")) {
              const fieldName = key.slice(0, -2);
              if (!formDataObj[fieldName]) formDataObj[fieldName] = [];
              formDataObj[fieldName].push(value);
            } else {
              if (formDataObj[key]) {
                if (!Array.isArray(formDataObj[key])) formDataObj[key] = [formDataObj[key]];
                formDataObj[key].push(value);
              } else {
                formDataObj[key] = value;
              }
            }
          }

          for (const key in formDataObj) {
            if (Array.isArray(formDataObj[key])) {
              formDataObj[key] = formDataObj[key].join(", ");
            }
          }

          const response = await fetch(this.action, {
            method: "POST",
            body: JSON.stringify(formDataObj),
            headers: { "Content-Type": "application/json" },
          });

          if (response.ok) {
            messageDiv.textContent = "Data submitted successfully!";
            messageDiv.style.backgroundColor = "#48c78e";
            messageDiv.style.color = "white";
            form.reset();
            setTimeout(() => {
              window.location.href = "index.html";
            }, 1500);
          } else {
            throw new Error("Submission failed.");
          }
        } catch (error) {
          console.error("Error:", error);
          messageDiv.textContent = "Error: " + error.message;
          messageDiv.style.backgroundColor = "#f14668";
          messageDiv.style.color = "white";
        } finally {
          submitButton.disabled = false;
          submitButton.classList.remove("is-loading");
        }
      });

      const cancelButton = form.querySelector("button.is-light");
      cancelButton.addEventListener("click", () => {
        form.reset();
        messageDiv.style.display = "none";
      });
    </script>
  </body>
</html>
